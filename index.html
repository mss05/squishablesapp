<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Squishables App - Interactive</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600&family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- 1. TASARIM Sƒ∞STEMƒ∞ (PASTEL) --- */
        :root {
            --purple: #DCD6F7; --dark-purple: #424874;
            --peach: #FFD1BA; --dark-peach: #d68c6d;
            --mint: #C4DFD9; --dark-mint: #2e5c4d;
            --bg-color: #eef2f5;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; user-select: none; }
        body { margin: 0; padding: 0; font-family: 'Nunito', sans-serif; background-color: var(--bg-color); display: flex; justify-content: center; align-items: center; height: 100vh; overflow: hidden; }

        /* TELEFON √áER√áEVESƒ∞ */
        #app-frame {
            width: 375px; height: 812px; background-color: white;
            border-radius: 40px; position: relative; overflow: hidden;
            box-shadow: 0 30px 60px rgba(0,0,0,0.3); border: 8px solid #222;
        }
        .notch {
            position: absolute; top: 0; left: 50%; transform: translateX(-50%);
            width: 150px; height: 30px; background: #222;
            border-bottom-left-radius: 20px; border-bottom-right-radius: 20px; z-index: 999;
        }

        /* EKRANLAR */
        .screen {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: white; display: none; flex-direction: column;
            padding-top: 40px; animation: fadeIn 0.3s ease;
        }
        .screen.active { display: flex; }
        .scroll-content { flex: 1; overflow-y: auto; padding: 20px; padding-bottom: 90px; }
        .scroll-content::-webkit-scrollbar { display: none; }

        /* HEADER */
        .header { display: flex; justify-content: space-between; align-items: center; padding: 10px 20px; }
        .points-badge { background: #FFF3E0; color: orange; padding: 5px 12px; border-radius: 15px; font-weight: bold; font-size: 0.9rem; display: flex; align-items: center; gap: 5px; }

        /* Bƒ∞LE≈ûENLER */
        h1, h2, h3 { font-family: 'Fredoka', sans-serif; color: var(--text-dark); margin-bottom: 5px; margin-top: 0; }
        p { color: #888; font-size: 0.9rem; margin-top: 0; }
        
        .card {
            background: white; border-radius: 20px; padding: 15px; margin-bottom: 15px;
            display: flex; align-items: center; gap: 15px; border: 1px solid #f0f0f0;
            box-shadow: 0 3px 8px rgba(0,0,0,0.03); cursor: pointer; transition: 0.2s;
        }
        .card:active { transform: scale(0.98); background: #fafafa; }
        
        .icon-box { width: 50px; height: 50px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; color: white; flex-shrink: 0; }
        
        .btn-action { padding: 8px 15px; border-radius: 12px; border: none; font-weight: bold; cursor: pointer; font-size: 0.8rem; margin-left: auto; }
        .btn-green { background: #C1E1C1; color: #2d5a2d; }
        .btn-peach { background: #FFD1BA; color: #8f5e41; }
        .btn-purple { background: #DCD6F7; color: #5a4b8f; }

        /* DOSYA Y√úKLEME & BUDDY ALANI */
        .upload-area {
            border: 2px dashed #ccc; background: #fafafa; border-radius: 20px; padding: 30px;
            text-align: center; cursor: pointer; margin: 20px 0; position: relative;
        }
        .buddy-preview-menu { width: 100px; height: 100px; object-fit: cover; border-radius: 50%; display: none; margin: 10px auto; border: 3px solid var(--purple); }

        /* --- DERS MODU (BUDDY ƒ∞LE) --- */
        .lesson-screen {
            background: #F8F9FA; display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 200; flex-direction: column;
        }
        
        /* Ders Arkada≈üƒ± (Sol Alt K√∂≈üe) */
        .buddy-container {
            position: absolute; bottom: 20px; left: 20px; display: flex; align-items: flex-end; gap: 10px; z-index: 210;
        }
        .buddy-avatar {
            width: 80px; height: 80px; border-radius: 50%; border: 3px solid white; 
            box-shadow: 0 5px 15px rgba(0,0,0,0.1); background: white; object-fit: cover;
        }
        .speech-bubble {
            background: white; padding: 10px 15px; border-radius: 15px 15px 15px 0;
            box-shadow: 0 5px 10px rgba(0,0,0,0.05); font-size: 0.9rem; color: var(--dark-purple);
            max-width: 200px; animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        /* Soru Alanƒ± */
        .question-area {
            flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; text-align: center;
        }
        .big-question { font-size: 3.5rem; font-family: 'Fredoka'; color: var(--dark-purple); margin: 20px 0; }
        .options-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; width: 100%; max-width: 300px; }
        .option-btn {
            background: white; border: 2px solid #eee; padding: 20px; border-radius: 15px;
            font-size: 1.5rem; font-weight: bold; color: var(--dark-purple); cursor: pointer;
        }

        /* --- AKTƒ∞Vƒ∞TE / TIMER MODU --- */
        .activity-screen {
            background: white; display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 200; flex-direction: column; padding: 30px; text-align: center;
        }
        .timer-circle {
            width: 200px; height: 200px; border-radius: 50%; border: 10px solid var(--mint);
            margin: 50px auto; display: flex; align-items: center; justify-content: center;
            font-size: 3rem; font-family: 'Fredoka'; color: var(--dark-mint);
        }

        /* BOTTOM NAV */
        .bottom-nav {
            position: absolute; bottom: 0; width: 100%; height: 80px; background: white;
            display: flex; justify-content: space-around; align-items: center;
            border-top: 1px solid #f0f0f0; padding-bottom: 15px; z-index: 100;
        }
        .nav-item { display: flex; flex-direction: column; align-items: center; gap: 4px; color: #ccc; font-size: 0.75rem; cursor: pointer; }
        .nav-item.active { color: var(--dark-purple); font-weight: bold; }
        .nav-item i { font-size: 1.4rem; }

        @keyframes popIn { from {transform: scale(0);} to {transform: scale(1);} }
        @keyframes fadeIn { from {opacity:0;} to {opacity:1;} }
    </style>
</head>
<body>

<div id="app-frame">
    <div class="notch"></div>

    <div id="screen-main" class="screen active">
        <div class="header">
            <div>
                <h3 id="greeting">Hi, Creator! üëã</h3>
            </div>
            <div class="points-badge">
                <i class="fa-solid fa-star"></i> <span id="total-points">0</span>
            </div>
        </div>

        <div class="scroll-content">
            
            <div id="tab-home" class="tab-content">
                <h2 style="margin-top:10px;">Daily Challenges</h2>
                <div style="display:flex; gap:10px; margin-bottom:15px; overflow-x:auto;">
                    <span style="background:var(--purple); color:var(--dark-purple); padding:5px 15px; border-radius:15px; font-weight:bold;">All</span>
                    <span style="background:#eee; color:#888; padding:5px 15px; border-radius:15px;">Today</span>
                </div>

                <div class="card" onclick="startActivity('Make a Flower', 10, 'var(--mint)')">
                    <div class="icon-box" style="background:var(--mint);"><i class="fa-solid fa-seedling"></i></div>
                    <div style="flex:1;">
                        <h3>Make a Flower</h3><p>10 min ‚Ä¢ Easy</p>
                    </div>
                    <button class="btn-action btn-green">Start</button>
                </div>
                
                <div class="card" onclick="startActivity('Build a Castle', 15, 'var(--peach)')">
                    <div class="icon-box" style="background:var(--peach);"><i class="fa-brands fa-fort-awesome"></i></div>
                    <div style="flex:1;">
                        <h3>Build a Castle</h3><p>15 min ‚Ä¢ Medium</p>
                    </div>
                    <button class="btn-action btn-peach">Resume</button>
                </div>

                <div class="card" onclick="startActivity('Create Animals', 12, 'var(--purple)')">
                    <div class="icon-box" style="background:var(--purple);"><i class="fa-solid fa-paw"></i></div>
                    <div style="flex:1;">
                        <h3>Create Animals</h3><p>12 min ‚Ä¢ Easy</p>
                    </div>
                    <button class="btn-action btn-purple">Start</button>
                </div>
            </div>

            <div id="tab-build" class="tab-content" style="display:none;">
                <h2>Study Buddy üéì</h2>
                <p>Upload your dough character. It will join you in lessons!</p>

                <div class="upload-area" onclick="document.getElementById('real-file').click()">
                    <div id="upload-placeholder">
                        <i class="fa-solid fa-camera" style="font-size:2rem; color:#ccc;"></i>
                        <p style="margin-top:10px;">Tap to upload your Buddy</p>
                    </div>
                    <img id="menu-buddy-preview" class="buddy-preview-menu">
                </div>
                <input type="file" id="real-file" style="display:none;" accept="image/*" onchange="handleFileUpload(this)">

                <div id="lesson-list" style="opacity:0.5; pointer-events:none;"> <h2 style="margin-top:20px;">Subjects</h2>
                    
                    <div class="card" onclick="startLesson('math')">
                        <div class="icon-box" style="background:var(--purple);"><i class="fa-solid fa-calculator"></i></div>
                        <div style="flex:1;"><h3>Math Fun</h3><p>Addition & Subtraction</p></div>
                        <i class="fa-solid fa-chevron-right" style="color:#ccc;"></i>
                    </div>

                    <div class="card" onclick="startLesson('colors')">
                        <div class="icon-box" style="background:var(--peach);"><i class="fa-solid fa-palette"></i></div>
                        <div style="flex:1;"><h3>Colors</h3><p>Identify colors</p></div>
                        <i class="fa-solid fa-chevron-right" style="color:#ccc;"></i>
                    </div>
                    
                    <div class="card" onclick="startLesson('shapes')">
                        <div class="icon-box" style="background:var(--mint);"><i class="fa-solid fa-shapes"></i></div>
                        <div style="flex:1;"><h3>Shapes</h3><p>Circle, Square, Triangle</p></div>
                        <i class="fa-solid fa-chevron-right" style="color:#ccc;"></i>
                    </div>
                </div>
            </div>

            <div id="tab-rewards" class="tab-content" style="display:none;">
                <h2>Rewards üèÜ</h2>
                <div style="background:linear-gradient(135deg, #FF9A9E 0%, #FECFEF 100%); padding:30px; border-radius:25px; text-align:center; color:white; margin-bottom:20px;">
                    <h1 id="rewards-score" style="font-size:3rem; margin:0; color:white;">0</h1>
                    <p style="color:white;">Total Points</p>
                </div>
                <h3>Badges</h3>
                <div style="display:grid; grid-template-columns:1fr 1fr 1fr; gap:10px;">
                    <div style="background:white; padding:10px; border-radius:15px; text-align:center; border:1px solid #eee;">ü•á<br><small>First</small></div>
                    <div style="background:white; padding:10px; border-radius:15px; text-align:center; border:1px solid #eee;">üî•<br><small>Streak</small></div>
                    <div style="background:white; padding:10px; border-radius:15px; text-align:center; border:1px solid #eee;">üé®<br><small>Artist</small></div>
                </div>
            </div>

        </div>

        <div class="bottom-nav">
            <div class="nav-item active" onclick="switchTab('home', this)"><i class="fa-solid fa-house"></i><span>Home</span></div>
            <div class="nav-item" onclick="switchTab('build', this)"><i class="fa-solid fa-graduation-cap"></i><span>Build & Learn</span></div>
            <div class="nav-item" onclick="switchTab('rewards', this)"><i class="fa-solid fa-trophy"></i><span>Rewards</span></div>
        </div>
    </div>


    <div id="lesson-screen" class="lesson-screen">
        <div style="padding:40px 20px 0 20px;">
            <i class="fa-solid fa-xmark" onclick="closeLesson()" style="font-size:1.5rem; cursor:pointer;"></i>
        </div>

        <div class="question-area">
            <span id="lesson-badge" style="background:var(--purple); color:var(--dark-purple); padding:5px 15px; border-radius:15px; font-weight:bold;">Math Level 1</span>
            
            <h1 id="question-text" class="big-question">2 + 2 = ?</h1>
            
            <div id="options-container" class="options-grid">
                </div>
        </div>

        <div class="buddy-container">
            <img id="lesson-buddy-img" src="https://cdn-icons-png.flaticon.com/512/4712/4712109.png" class="buddy-avatar">
            <div class="speech-bubble" id="buddy-speech">
                Let's solve this together! You can do it!
            </div>
        </div>
    </div>


    <div id="activity-screen" class="activity-screen">
        <div style="padding:40px 20px 0 20px; text-align:left;">
            <i class="fa-solid fa-arrow-left" onclick="closeActivity()" style="font-size:1.5rem; cursor:pointer;"></i>
        </div>
        <h1 id="activity-title" style="font-size:2rem; margin-top:20px;">Make a Flower</h1>
        <p>Grab your dough and follow the steps!</p>

        <div class="timer-circle">
            10:00
        </div>

        <div style="display:flex; justify-content:center; gap:20px; margin-top:30px;">
            <button class="btn-action" style="padding:15px 30px; font-size:1rem; background:#eee;">Pause</button>
            <button class="btn-action btn-green" style="padding:15px 30px; font-size:1rem;" onclick="finishActivity()">Finish</button>
        </div>
    </div>

</div>

<script>
    /* --- 1. VERƒ∞ Y√ñNETƒ∞Mƒ∞ --- */
    let currentScore = 0;
    let uploadedBuddySrc = null; // Y√ºklenen fotoƒürafƒ± burada tutacaƒüƒ±z
    let currentQuestionIndex = 0;
    let currentSubject = 'math';

    // Ders Sorularƒ± (Detaylƒ±)
    const lessons = {
        math: [
            { q: "3 + 2 = ?", options: [4, 5, 6, 1], ans: 5 },
            { q: "10 - 5 = ?", options: [2, 5, 8, 3], ans: 5 },
            { q: "4 + 4 = ?", options: [8, 9, 6, 10], ans: 8 },
            { q: "6 + 1 = ?", options: [5, 6, 7, 8], ans: 7 }
        ],
        colors: [
            { q: "Which is RED?", options: ["üü•", "üü¶", "üü®", "üü©"], ans: "üü•" },
            { q: "Which is BLUE?", options: ["üüß", "üü¶", "üü™", "üü´"], ans: "üü¶" },
            { q: "Mix üü• + üü® = ?", options: ["Green", "Purple", "Orange", "Black"], ans: "Orange" }
        ],
        shapes: [
            { q: "Find the Circle", options: ["‚¨õ", "üîµ", "üî∫", "‚≠ê"], ans: "üîµ" },
            { q: "Find the Triangle", options: ["üî∂", "üîµ", "üî∫", "üü¶"], ans: "üî∫" }
        ]
    };

    /* --- 2. NAVƒ∞GASYON --- */
    function switchTab(tabId, el) {
        document.querySelectorAll('.tab-content').forEach(t => t.style.display = 'none');
        document.getElementById('tab-' + tabId).style.display = 'block';
        
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        if(el) el.classList.add('active');
    }

    /* --- 3. DOSYA Y√úKLEME (Study Buddy) --- */
    function handleFileUpload(input) {
        const file = input.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                uploadedBuddySrc = e.target.result; // Resmi hafƒ±zaya al
                
                // Men√ºdeki √∂nizlemeyi g√ºncelle
                const preview = document.getElementById('menu-buddy-preview');
                preview.src = uploadedBuddySrc;
                preview.style.display = 'block';
                document.getElementById('upload-placeholder').style.display = 'none';

                // Ders ekranƒ±ndaki Buddy'i de g√ºncelle
                document.getElementById('lesson-buddy-img').src = uploadedBuddySrc;

                // Dersleri aktif et
                document.getElementById('lesson-list').style.opacity = '1';
                document.getElementById('lesson-list').style.pointerEvents = 'auto';

                alert("Buddy Uploaded! Now you can start a lesson together.");
            }
            reader.readAsDataURL(file);
        }
    }

    /* --- 4. DERS MANTIƒûI --- */
    function startLesson(subject) {
        currentSubject = subject;
        currentQuestionIndex = 0;
        
        // Ekranƒ± a√ß
        document.getElementById('lesson-screen').style.display = 'flex';
        
        // ƒ∞lk soruyu y√ºkle
        loadQuestion();
        
        // Buddy konu≈üsun
        buddyTalk("Let's start! I'm here to help.");
    }

    function loadQuestion() {
        const questionData = lessons[currentSubject][currentQuestionIndex];
        
        // Soruyu yaz
        document.getElementById('question-text').innerText = questionData.q;
        document.getElementById('lesson-badge').innerText = subjectTitle(currentSubject);
        
        // ≈ûƒ±klarƒ± temizle ve ekle
        const container = document.getElementById('options-container');
        container.innerHTML = "";
        
        questionData.options.forEach(opt => {
            const btn = document.createElement('button');
            btn.className = 'option-btn';
            btn.innerText = opt;
            btn.onclick = () => checkAnswer(opt, questionData.ans, btn);
            container.appendChild(btn);
        });
    }

    function checkAnswer(selected, correct, btnElement) {
        if(selected == correct) {
            // Doƒüru Cevap
            btnElement.style.background = "#C1E1C1";
            btnElement.style.borderColor = "green";
            currentScore += 10;
            updatePoints();
            buddyTalk("Great job! That's correct! üéâ");
            
            setTimeout(() => {
                nextQuestion();
            }, 1000);
        } else {
            // Yanlƒ±≈ü Cevap
            btnElement.style.background = "#FFD1BA";
            buddyTalk("Oops! Try again, I know you can do it.");
        }
    }

    function nextQuestion() {
        if(currentQuestionIndex < lessons[currentSubject].length - 1) {
            currentQuestionIndex++;
            loadQuestion();
            buddyTalk("Here is the next one...");
        } else {
            buddyTalk("We finished the lesson! High five! ‚úã");
            setTimeout(() => {
                alert("Lesson Complete! +50 Points");
                currentScore += 50;
                updatePoints();
                closeLesson();
            }, 1500);
        }
    }

    function buddyTalk(text) {
        const bubble = document.getElementById('buddy-speech');
        bubble.innerText = text;
        // Animasyonu yeniden tetikle
        bubble.style.animation = 'none';
        bubble.offsetHeight; /* trigger reflow */
        bubble.style.animation = 'popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)';
    }

    function closeLesson() {
        document.getElementById('lesson-screen').style.display = 'none';
    }

    function subjectTitle(sub) {
        if(sub === 'math') return "Math Quiz";
        if(sub === 'colors') return "Color Challenge";
        return "Quiz";
    }

    /* --- 5. AKTƒ∞Vƒ∞TE / CHALLENGE MODU --- */
    function startActivity(title, time, color) {
        document.getElementById('activity-screen').style.display = 'flex';
        document.getElementById('activity-title').innerText = title;
        document.querySelector('.timer-circle').style.borderColor = color;
        document.querySelector('.timer-circle').style.color = color;
        document.querySelector('.timer-circle').innerText = time + ":00";
    }

    function closeActivity() {
        document.getElementById('activity-screen').style.display = 'none';
    }

    function finishActivity() {
        alert("Challenge Completed! Points added.");
        currentScore += 100;
        updatePoints();
        closeActivity();
    }

    function updatePoints() {
        document.getElementById('total-points').innerText = currentScore;
        document.getElementById('rewards-score').innerText = currentScore;
    }

</script>

</body>
</html>
